/* =========================
   상단바 & 공통 변수
   ========================= */
:root{
  --topbar-height: 64px;
  --topbar-height-mobile: 56px;
  --bg:#fff; --fg:#222; --card:#fff; --primary:#5E936C;
  --shadow-0:0 1px 2px rgba(0,0,0,.06);
  --shadow-1:0 6px 18px rgba(0,0,0,.06),0 2px 6px rgba(0,0,0,.04);
}

/* =========================
   페이지 컨테이너
   ========================= */
.events-page{
  min-height: 100vh;
  background:var(--bg); color:var(--fg);
  font-family:'Pretendard',system-ui,-apple-system,Segoe UI,Roboto,sans-serif;
  padding: clamp(16px, 2vw, 28px);
  padding-bottom: clamp(28px, 4vw, 48px);
  box-sizing: border-box;
}
.events-page.is-under-topbar{ padding-top: calc(var(--topbar-height) + 12px); }
@media (max-width: 768px){
  .events-page.is-under-topbar{ padding-top: calc(var(--topbar-height-mobile) + 8px); }
}

/* =========================
   헤더 / 버튼
   ========================= */
.events-header{ margin: 0 0 12px; }

.pill-btn {
  border: 1px solid rgba(0, 0, 0, .08);
  background: var(--card);
  padding: 8px 14px;
  border-radius: 999px;
  font-size: 14px;
  cursor: pointer;
  box-shadow: var(--shadow-0);
  transition: transform .06s ease, box-shadow .12s ease, background .12s ease, color .12s ease, border-color .12s ease;
}
.pill-btn:hover { transform: translateY(-1px); box-shadow: var(--shadow-1); }
.pill-btn.active { background: var(--primary); color: #fff; border-color: transparent; }

/* =========================
   카드 그리드
   ========================= */
.events-grid{
  display: grid; align-items: start; overflow: visible;
  gap: 28px; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
}
.events-grid .event-card{ width: 100% !important; max-width: 440px; margin: 0 auto; }
@media (min-width: 800px){ .events-grid{ grid-template-columns: repeat(auto-fit, minmax(320px, 1fr)); gap: 28px; } }
@media (min-width: 1200px){ .events-grid{ grid-template-columns: repeat(auto-fit, minmax(340px, 1fr)); } }
@media (min-width: 1440px){ .events-grid{ grid-template-columns: repeat(auto-fit, minmax(360px, 1fr)); } }
@media (min-width: 1800px){ .events-grid{ grid-template-columns: repeat(auto-fit, minmax(380px, 1fr)); } }

/* =========================
   빈 상태
   ========================= */
.events-empty{
  display:flex; flex-direction:column; align-items:center; justify-content:center;
  gap:10px; text-align:center; padding: 56px 16px;
  background:#fff; border-radius:16px; border:1px solid rgba(0,0,0,.06); box-shadow: 0 1px 2px rgba(0,0,0,.06);
}
.events-empty .emoji{ font-size:28px; }
.events-empty .title{ font-weight:600; }
.events-empty .desc{ opacity:.75; font-size:14px; }

/* =========================
   지도 영역
   ========================= */
.map-box{
  width: 100%; height: min(70vh, 720px);
  border-radius: 16px; border: 1px solid rgba(0,0,0,.08);
  background: #f8f9fa; overflow: hidden;
  touch-action: auto; /* 모바일 제스처 방해 방지 */
}

/* =========================
   커스텀 핀 (이미지 없음)
   ========================= */
.km-pin-wrap{
  position: relative;
  width: 40px; height: 52px;           /* SVG와 동일 */
  transform: translate(-50%, -100%);   /* 좌표 기준 중앙 하단 정렬 */
  pointer-events: none;                 /* 드래그 방해 금지 */
}
.km-pin{
  position: relative; width: 40px; height: 52px;
  pointer-events: auto;                 /* 핀만 클릭 가능 */
}
.km-pin .pin-bg{
  position: absolute; left: 0; top: 0; display: block;
}

/* =========================
   CustomOverlay 기반 인포윈도우(둥근 프레임 + 초록 테두리)
   ========================= */
.custom-infowindow{
  position: relative;
  background: #fff;
  border: 2px solid var(--primary);     /* 메인 초록 테두리 */
  border-radius: 16px;                  /* 둥글게 */
  box-shadow: 0 10px 26px rgba(0,0,0,.12);
  padding: 12px 14px;
  min-width: 220px;
  max-width: 300px;
}

/* 말풍선 화살표 (아래) */
.custom-infowindow::after{
  content:"";
  position:absolute; left: 40px;        /* 화살표 x 위치 (핀과의 정렬은 JS xAnchor로도 보정 가능) */
  bottom:-10px;
  width:0; height:0;
  border-left:10px solid transparent;
  border-right:10px solid transparent;
  border-top:10px solid #fff;           /* 내부색 */
  filter: drop-shadow(0 -1px 0 var(--primary));
}
.custom-infowindow::before{
  content:"";
  position:absolute; left: 40px;
  bottom:-12px;
  width:0; height:0;
  border-left:11px solid transparent;
  border-right:11px solid transparent;
  border-top:12px solid var(--primary); /* 테두리색(외곽) */
  z-index: -1;
}

/* 내부 콘텐츠 */
.custom-infowindow .meta{
  display:flex; flex-direction:column; gap:6px; width:100%;
}
.custom-infowindow .title{
  font-size:15px; font-weight:800; color:#1e1e1e; line-height:1.3;
  word-break: keep-all;
}
.custom-infowindow .desc{
  font-size:12px; color:#5b5b5b; line-height:1.3;
  white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
}
.custom-infowindow .sub{
  font-size:12px; color:#3a3a3a; line-height:1.3;
}

/* 버튼 – 본문과 간격, 둥글게, 초록 테두리 */
.custom-infowindow .outline-btn{
  align-self:flex-start;
  margin-top: 10px;                     /* 본문과 버튼 띄우기 */
  border:1.5px solid var(--primary);
  background:#fff; color:#1f3d2a;
  border-radius:10px;
  padding:6px 10px;
  font-size:12px; font-weight:600;
  cursor:pointer;
  transition: transform .06s ease, box-shadow .12s ease, background .12s ease, color .12s ease, border-color .12s ease;
}
.custom-infowindow .outline-btn:hover{
  transform: translateY(-1px);
  box-shadow: var(--shadow-0);
  background: rgba(94,147,108,.08);
  border-color: color-mix(in srgb, var(--primary) 88%, #000 12%);
}

/* =========================
   모바일 보정
   ========================= */
@media (max-width: 480px){
  .events-grid{ gap: 20px; grid-template-columns: minmax(0, 1fr); }
  .events-grid .event-card{ width: 92% !important; max-width: 380px; }
  .custom-infowindow{ min-width: 200px; max-width: 260px; padding:10px 12px; border-radius:14px; }
  .custom-infowindow .outline-btn{ padding:5px 9px; border-radius:9px; }
}
