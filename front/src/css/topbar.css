:root{
  --sidebar-width: 336px;
  --topbar-height: 64px;
  --topbar-height-mobile: 56px;
  --search-edge-gap: 12px;

  --brand: #5E936C;
  --ink: #191f28;
  --muted: #6c757d;
  --line: #e9ecef;

  --search-bg: #f3f5f4;
  --search-border: #e6ebe7;
  --placeholder: #adb5bd;
}

/* ===== 데스크탑 ===== */
.topbar-container{
  position: fixed; top:0; left: var(--sidebar-width);
  width: calc(100% - var(--sidebar-width)); height: var(--topbar-height);
  background:#fff; border-bottom:1px solid var(--line);
  z-index:1000; display:flex; align-items:center; box-sizing: border-box;
  font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif;
}

/* 검색(1fr) | 우측 버튼(auto) → 검색이 가능한 한 최대 확장 */
.topbar-content{
  width:100%; height:100%; padding:0 16px 0 20px;
  display:grid; grid-template-columns: 1fr auto; gap:16px; align-items:center;
}
/* 로그인 상태면 오른쪽 컬럼 자체를 없앰 → 검색 진짜 풀폭 */
.topbar-content.no-right{
  grid-template-columns: 1fr;
}

.topbar-center{ 
  grid-column: 1; 
  display:flex; align-items:center;
}
.topbar-right{ 
  grid-column: 2; 
  display:flex; align-items:center; gap:12px; justify-content:flex-end;
}

/* 공통 검색 바 */
.topbar-search{
  width:100%; display:flex; align-items:center; gap:12px;
  background:var(--search-bg); border:1px solid var(--search-border);
  border-radius:28px; padding:14px 20px; transition:all .18s ease; box-sizing: border-box;
}
.topbar-search--desktop{ 
  width:100%;  /* ← 풀폭 */
  height:48px;
  /* max-width / min-width 없이 전체 채움 */
}
.topbar-search:focus-within{ 
  background:#fff; 
  border-color:var(--brand); 
  box-shadow:0 0 0 3px rgba(94,147,108,.12); 
}
.topbar-search input{ 
  flex:1; border:none; outline:none; background:transparent; 
  font-size:16px; color:var(--ink); height:100%;
}
.topbar-search input::placeholder{ color:var(--placeholder); }

.topbar-search-icon{ width:20px; height:20px; color:var(--muted); }

/* 아이콘 버튼 */
.topbar-icon-btn{
  position:relative; width:40px; height:40px; border:none; border-radius:50%;
  background:#f8f9fa; color:#495057; display:flex; align-items:center; justify-content:center;
  cursor:pointer; transition: background-color .18s ease, transform .06s ease;
}
.topbar-icon-btn:hover{ background:#eef1f1; }
.topbar-icon-btn:active{ transform: translateY(1px); }

/* ===== 모바일 ===== */
@media (max-width: 820px){
  .topbar-container{ display:none; }

  .topbar-mobile-container{
    position:fixed; top:0; left:0; z-index:1000;
    width:100%;
    height: calc(var(--topbar-height-mobile) + env(safe-area-inset-top, 0px));
    padding-top: env(safe-area-inset-top, 0px);
    background:#fff; border-bottom:1px solid var(--line);
    display:flex; align-items:center; box-sizing: border-box;
  }

  .topbar-mobile-content{
    width:100%; height: calc(var(--topbar-height-mobile));
    padding:0 10px;
    display:grid; align-items:center; gap:8px; box-sizing: border-box;
    grid-template-columns: 48px 1fr 48px; /* 좌 / 중앙 / 우(로그인 1개) */
  }

  .topbar-mobile-logo-btn{
    width:44px; height:44px; border:none; background:transparent; padding:0;
    display:flex; align-items:center; justify-content:center; cursor:pointer;
    line-height: 0;
  }
  .topbar-mobile-logo{ height: 30px; width:auto; object-fit:contain; display:block; }

  .topbar-search--mobile{
    justify-self:center; max-width:52vw; width:100%;
    padding:8px 12px; border-radius:20px;
  }
  .topbar-search--mobile input{ font-size:13px; }

  .topbar-search--mobile .topbar-search-icon{
    width:20px !important;
    height:20px !important;
    flex:0 0 20px;
  }

  .topbar-mobile-right{
    justify-self:end; display:flex; align-items:center; justify-content:flex-end;
    gap:8px; min-width:48px;
  }
}

/* 폼 자체에 좌우 패딩을 줘서 검색박스가 가장자리랑 딱 붙지 않게 */
.topbar-search-form {
  width: 100%;
  display: flex;
  align-items: center;
  padding-inline: var(--search-edge-gap);  /* ← 추가 */
}

/* 검색박스는 전체폭 사용(우측 버튼 있을 땐 그 칸 빼고 1fr 전체) */
.topbar-search--desktop{ 
  width: 100%;
  height: 48px;
  /* max/min-width 없이 풀폭으로 */
}

/* ===== 모바일 ===== */
@media (max-width: 820px){
  /* ... 기존 모바일 컨테이너/그리드 유지 ... */

  /* 중앙 검색: 아이콘과 버튼 사이 공간을 충분히 쓰도록 max-width 제거 */
  .topbar-search--mobile{
    justify-self: stretch;   /* ← 중앙 셀 전체 폭 사용 */
    width: 100%;
    max-width: none;         /* ← 52vw 제한 제거 */
    padding: 8px 12px; 
    border-radius: 20px;
  }

  /* 모바일에서도 폼에 좌우 여백 살짝 */
  .topbar-search-form {
    padding-inline: var(--search-edge-gap); /* ← 추가(모바일에도 동일한 느낌) */
  }
}